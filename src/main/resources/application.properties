# ===================================================================
# Main Application Configuration
# Defines default values. Can be overridden by secrets.properties.
# ===================================================================

# --- Import Sensitive Data ---
# Loads additional properties from a file named 'secrets.properties'.
spring.config.import=optional:file:./secrets.properties

# --- Server Configuration ---
# Uses port from secrets.properties, or defaults to 8080.
server.port=${server.port:8080}
spring.application.name=forkmyfolio-backend

# ===================================================================
# MySQL Database Configuration
# ===================================================================
spring.datasource.url=jdbc:mysql://localhost:3306/forkmyfolio_db?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
# Credentials MUST be provided in secrets.properties. No default.
spring.datasource.username=${db.username}
spring.datasource.password=${db.password}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ===================================================================
# JPA / Hibernate Configuration for MySQL
# ===================================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
# spring.jpa.show-sql=true

# ===================================================================
# JWT & Cookie Configuration
# ===================================================================
# Secret key MUST be provided in secrets.properties. No default.
jwt.secret=${jwt.secret.key}

# Token expirations use values from secrets.properties, or default to these.
# Access token expiration (Default: 1 hour = 3600000 ms)
jwt.expiration.ms=3600000
# Refresh token expiration (Default: 7 days = 604800000 ms)
jwt.refresh.expiration.ms=604800000

app.jwt.refresh-cookie-name=refreshToken

# Cookie Configuration
app.cookie.secure=false
app.cookie.samesite=Lax

# ===================================================================
# Default Admin User Configuration
# ===================================================================
app.default-admin.email=admin@gmail.com
# Password MUST be provided in secrets.properties. No default.
app.default-admin.password=123123123
app.default-admin.first-name=Your-First-Name
app.default-admin.last-name=Your-Last-Name

# ===================================================================
# Development & Misc Configuration
# ===================================================================
# CORS Configuration. Uses value from secrets.properties, or defaults to this.
app.cors.allowed-origins=http://localhost:5173

# Springdoc OpenAPI / Swagger UI
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html

# Logging Configuration
# Turn off SQL statement logging
logging.level.org.hibernate.SQL=OFF

# Turn off parameter binding (those ? placeholders)
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF

# Optional: Disable HQL (JPQL) logging too
logging.level.org.hibernate.hql.internal.ast.AST=OFF

# Just in case: Shut up JDBC and query translators too
logging.level.org.hibernate.engine.jdbc.spi.SqlStatementLogger=OFF
logging.level.org.hibernate.orm.jdbc.bind=OFF
logging.level.org.hibernate.orm.jdbc.extract=OFF
